{% extends "base.html" %}

{% block title %}Detalle del Partido{% endblock %}

{% block content %}
    <h1>{{ partido.nombre_cancha }}</h1>
    <p><strong>Ubicación:</strong> {{ partido.ubicacion }}</p>
    <p><strong>Fecha:</strong> {{ partido.fecha.strftime('%d/%m/%Y a las %H:%M') }} hs</p>
    <p><strong>Cupos:</strong> {{ partido.jugadores_inscritos|length }} / {{ partido.jugadores_necesarios }}</p>
    <hr>
    <h3>Jugadores Inscritos:</h3>
    <ul style="list-style-type: circle; padding-left: 20px;">
        {% for jugador in partido.jugadores_inscritos %}
            <li>{{ jugador.nombre }} {{ jugador.apellido }}</li>
        {% else %}
            <li>Nadie se ha inscrito todavía.</li>
        {% endfor %}
    </ul>

    <hr>
    
    {% if partido.jugadores_inscritos|length >= 2 %}
        <div style="text-align: center; margin: 20px 0;">
            <a href="{{ url_for('organizar_partido', partido_id=partido.id) }}" style="background-color: #28a745; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">
                Armar Equipos Balanceados
            </a>
        </div>
    {% endif %}

    {% if current_user.is_authenticated %}
        {% if current_user in partido.jugadores_inscritos %}
            <p style="text-align: center; font-style: italic;">Ya estás inscrito en este partido.</p>
        {% elif partido.jugadores_inscritos|length < partido.jugadores_necesarios %}
            <h3 style="text-align: center;">Inscribirse al partido</h3>
            <form action="{{ url_for('inscribir_jugador', partido_id=partido.id) }}" method="POST" style="text-align: center;">
                <input type="submit" value="¡Inscribirme ahora!" style="display: inline-block; width: auto;">
            </form>
        {% else %}
            <h3 style="text-align: center;">¡Partido completo!</h3>
        {% endif %}
    {% else %}
        <p style="text-align: center; font-style: italic;"><a href="{{ url_for('login') }}">Inicia sesión</a> para poder inscribirte.</p>
    {% endif %}
{% endblock %}