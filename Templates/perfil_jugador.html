{% extends "base.html" %}

{% block title %}Perfil de {{ jugador.nombre }} {{ jugador.apellido }}{% endblock %}

{% block content %}
    <h1>{{ jugador.nombre }} {{ jugador.apellido }}</h1>
    <p style="text-align: center; color: #666;">{{ jugador.email }}</p>
    <hr>
    <h2>Estadísticas Actuales</h2>
    <ul style="list-style-type: none; padding: 0;">
        <li style="padding: 8px; border-bottom: 1px solid #eee;"><strong>Puntaje Global:</strong> {{ "%.2f"|format(jugador.puntaje_global) }}</li>
        <li style="padding: 8px; border-bottom: 1px solid #eee;">Ataque: {{ "%.2f"|format(jugador.puntaje_ataque) }}</li>
        <li style="padding: 8px; border-bottom: 1px solid #eee;">Defensa: {{ "%.2f"|format(jugador.puntaje_defensa) }}</li>
        <li style="padding: 8px; border-bottom: 1px solid #eee;">Físico: {{ "%.2f"|format(jugador.puntaje_fisico) }}</li>
        <li style="padding: 8px; border-bottom: 1px solid #eee;">Pases: {{ "%.2f"|format(jugador.puntaje_pases) }}</li>
        <li style="padding: 8px; border-bottom: 1px solid #eee;">Visión: {{ "%.2f"|format(jugador.puntaje_vision) }}</li>
        <li style="padding: 8px;">Partidos Jugados: {{ jugador.partidos_jugados }}</li>
    </ul>

    <hr style="margin: 30px 0;">

    <!-- Lógica para mostrar/ocultar el formulario de calificación -->
    {% if current_user.is_authenticated and current_user.id != jugador.id %}
        <div class="rating-form">
            <h2>Calificar Jugador (Post-Partido)</h2>
            <form action="{{ url_for('calificar_jugador', jugador_id=jugador.id) }}" method="POST">
                <label for="ataque">Ataque (1-10):</label>
                <input type="number" id="ataque" name="ataque" min="1" max="10" required>

                <label for="defensa">Defensa (1-10):</label>
                <input type="number" id="defensa" name="defensa" min="1" max="10" required>

                <label for="fisico">Físico (1-10):</label>
                <input type="number" id="fisico" name="fisico" min="1" max="10" required>

                <label for="pases">Pases (1-10):</label>
                <input type="number" id="pases" name="pases" min="1" max="10" required>

                <label for="vision">Visión (1-10):</label>
                <input type="number" id="vision" name="vision" min="1" max="10" required>

                <input type="submit" value="Enviar Calificación" style="background-color: #007BFF; color: white; border: none; padding: 10px; cursor: pointer;">
            </form>
        </div>
    {% elif current_user.is_authenticated and current_user.id == jugador.id %}
        <p style="text-align: center; font-style: italic;"></p>
    {% else %}
        <p style="text-align: center; font-style: italic;"><a href="{{ url_for('login') }}">Inicia sesión</a> para calificar a este jugador.</p>
    {% endif %}

{% endblock %}